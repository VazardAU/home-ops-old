clusterName: home-cluster
talosVersion: v1.3.6
kubernetesVersion: v1.26.1
endpoint: https://192.168.10.200:6443
allowSchedulingOnMasters: true
cniConfig:
  name: none
nodes:
  - hostname: k8s-cp01
    ipAddress: 192.168.10.201
    controlPlane: true
    installDisk: /dev/sda
    nameservers:
      - 192.168.10.1
      - 1.1.1.1
    networkInterfaces:
      - interface: eth0
        addresses:
          - 192.168.10.201/24
        routes:
          - network: 0.0.0.0/0
            gateway: 192.168.10.1
        mtu: 1500
        vip:
          ip: 192.168.10.200
  - hostname: k8s-cp02
    ipAddress: 192.168.10.202
    controlPlane: true
    installDisk: /dev/sda
    nameservers:
      - 192.168.10.1
      - 1.1.1.1
    networkInterfaces:
      - interface: eth0
        addresses:
          - 192.168.10.202/24
        routes:
          - network: 0.0.0.0/0
            gateway: 192.168.10.1
        mtu: 1500
        vip:
          ip: 192.168.10.200
  - hostname: k8s-cp03
    ipAddress: 192.168.10.203
    controlPlane: true
    installDisk: /dev/sda
    nameservers:
      - 192.168.10.1
      - 1.1.1.1
    networkInterfaces:
      - interface: eth0
        addresses:
          - 192.168.10.203/24
        routes:
          - network: 0.0.0.0/0
            gateway: 192.168.10.1
        mtu: 1500
        vip:
          ip: 192.168.10.200
  - hostname: k8s-wk01
    ipAddress: 192.168.10.204
    controlPlane: false
    installDisk: /dev/sda
    nameservers:
      - 192.168.10.1
      - 1.1.1.1
    networkInterfaces:
      - interface: eth0
        addresses:
          - 192.168.10.204/24
        routes:
          - network: 0.0.0.0/0
            gateway: 192.168.10.1
        mtu: 1500
  - hostname: k8s-wk02
    ipAddress: 192.168.10.205
    controlPlane: false
    installDisk: /dev/sda
    nameservers:
      - 192.168.10.1
      - 1.1.1.1
    networkInterfaces:
      - interface: eth0
        addresses:
          - 192.168.10.205/24
        routes:
          - network: 0.0.0.0/0
            gateway: 192.168.10.1
        mtu: 1500
  - hostname: k8s-wk03
    ipAddress: 192.168.10.206
    controlPlane: false
    installDisk: /dev/sda
    nameservers:
      - 192.168.10.1
      - 1.1.1.1
    networkInterfaces:
      - interface: eth0
        addresses:
          - 192.168.10.206/24
        routes:
          - network: 0.0.0.0/0
            gateway: 192.168.10.1
        mtu: 1500
controlPlane:
  patches:
    - |-
      - op: add
        path: /machine/kubelet/extraArgs
        value:
          rotate-server-certificates: "true"
          feature-gates: CronJobTimeZone=true,GracefulNodeShutdown=true
      - op: add
        path: /cluster/controllerManager/extraArgs
        value:
          bind-address: 0.0.0.0
      - op: add
        path: /cluster/scheduler/extraArgs
        value:
          bind-address: 0.0.0.0
      - op: add
        path: /cluster/proxy/extraArgs
        value:
          bind-address: 0.0.0.0
    - |-
      machine:
        time:
          disabled: false
          servers:
            - 192.168.10.1
worker:
  patches:
    - |-
      - op: add
        path: /machine/kubelet/extraArgs
        value:
          rotate-server-certificates: "true"
          feature-gates: CronJobTimeZone=true,GracefulNodeShutdown=true
    - |-
      machine:
        time:
          disabled: false
          servers:
            - 192.168.10.1
